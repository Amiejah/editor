(function(e){e.fn.CCEDITOR=function(n,r){function o(t,n,r){t.contentWindow.focus();try{t.contentWindow.document.execCommand(n,!1,r)}catch(i){console.log(i)}e(".toolbar-icon").removeClass("toolbar-selected");e("."+r).addClass("toolbar-selected");t.contentWindow.focus()}function u(e,t,n){try{e.contentWindow.document.open();e.contentWindow.document.write(t);e.contentWindow.document.close()}catch(r){console.log(r)}if(document.contentEditable){e.contentWindow.document.designMode="on";n();return!0}if(document.designMode!=null)try{e.contentWindow.document.designMode="on";n();return!0}catch(r){console.log(r)}setTimeout(function(){u(e,t,n)},250);return!1}function a(t){var n=document.createElement("iframe");n.frameBorder=0;n.frameMargin=0;n.framePadding=0;n.height=i.height;n.width=i.width;t.attr("class")&&(n.className=t.attr("class"));t.attr("id")&&(n.id=t.attr("id"));t.attr("name")&&(n.title=t.attr("name"));t.after(n);var s="";if(r)var s="<link type='text/css' rel='stylesheet' href='"+r+"'/>";var o=t.val();e.trim(o)==""&&(o="<br>");var a="<html><head>"+s+'</head><body class="framebody">'+o+"</body></html>";u(n,a,function(){e("#toolbar-"+n.title).remove();e(n).before(l(n));t.remove()})}function f(n,r){var i=n.contentWindow.document.getElementsByTagName("body")[0].innerHTML;if(r==1)var s=e('<input type="hidden"/>');else var s=e('<textarea cols="40" rows="10"></textarea>');s.val(i);t=s.get(0);n.className&&(t.classNam=n.className);n.id&&(t.id=n.id);n.title&&(t.name=n.title);e(n).before(s);r!=1&&e(n).remove();return s}function l(t){var n=e('<section class="toolbar">                            <ul class="styles basic">                                <li class="bold toolbar-icon">b</li>                                <li class="italic toolbar-icon">i</li>                                <li class="underline toolbar-icon">u</li>                            </ul>                        </section>');e(".bold",n).on("click",function(){o(t,"bold","bold");return!1});e(".italic",n).on("click",function(){o(t,"italic","italic");return!1});e(".underline",n).on("click",function(){o(t,"underline","underline");return!1});e(t).parents("form").submit(function(e){f(t,!0)});return n}var i=e.extend({height:250,width:320,inputName:"NewThreadTopic"},n),s=0;if(document.designMode||document.contentEditable)return this.each(function(){var t=e(this);a(t)})}})(jQuery);